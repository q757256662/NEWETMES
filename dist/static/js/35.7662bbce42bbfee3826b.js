webpackJsonp([35],{FrEr:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"components-container",staticStyle:{height:"100vh"}},[i("div",{staticClass:"chart-container"},[i("line-marker",{attrs:{height:"100%",width:"100%"}})],1)])},staticRenderFns:[]}},"G+WT":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("cm1E"),s=i.n(a);t.default={components:{lineMarker:s.a}}},MbcQ:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("XLwt"),s=i.n(a),r=i("rEb0"),n=i("TIfe");t.default={props:{className:{type:String,default:"chart"},id:{type:String,default:"chart"},width:{type:String,default:"800px"},height:{type:String,default:"800px"}},data:function(){return{chart:null,ishow:!1,power:"",staffId:"",legend:[],chartDate:null,value7:"",value9:"",value4:"",pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-6048e5),e.$emit("pick",[i,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-2592e6),e.$emit("pick",[i,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-7776e6),e.$emit("pick",[i,t])}}]},value5:"2018",listQuery:{model:"款",year:(new Date).toISOString().slice(0,7),sTime:(new Date).toISOString().slice(0,7)+"-01 00:00",eTime:(new Date).toISOString().slice(0,10)+" 23:59",userId:0,PLID:this.$store.state.user.PLID,random:Math.random()},series:[],X:[],Y:[],options:[{value:"款",label:"款"},{value:"生产单",label:"生产单"},{value:"pod",label:"特体pod"},{value:"件数",label:"件数"},{value:"床",label:"床数"}],value:"all"}},mounted:function(){},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},created:function(){this.getPLID(),this.power=i.i(n.b)(),this.defaultTime()},methods:{getPLID:function(){var e=this;i.i(r.a)().then(function(t){e.search(),e.listQuery.PLID=t.data.PLID})},downLoad:function(){var e=this,t={};t.sTime=this.listQuery.sTime,t.eTime=this.listQuery.eTime,t.model=this.listQuery.model,i.i(r.b)(t).then(function(t){201==t.status?e.$message({message:"文件不存在",type:"error",offset:700}):window.location.href="/bmapi/downpice?sTime="+e.listQuery.sTime+"&eTime="+e.listQuery.eTime+"&model="+e.listQuery.model})},defaultTime:function(){var e=new Date,t=e.getFullYear(),i=e.getMonth(),a=e.getDate();new Date;e.setTime(e.getTime());var s=e.getFullYear(),r=e.getMonth(),n=e.getDate()-e.getDate()+1;this.value7=[new Date(s,r,n),new Date(t,i,a)]},choiceMonth:function(e){this.listQuery.year=e,this.listQuery.eTime=e+" 01-00:00",this.listQuery.sTime=e+" 01-00:00",this.search()},textChange:function(e){var t=new Date(this.value7[0]),i=new Date(this.value7[1]),a=t.getFullYear(),s=t.getMonth()+1,r=t.getDate(),n=i.getFullYear(),l=i.getMonth()+1,o=i.getDate();this.listQuery.sTime=(a+"-"+s+"-"+r+" 00:00:00").toString(),this.listQuery.eTime=(n+"-"+l+"-"+o+" 23:59:00").toString(),this.search()},search:function(){var e=this;0==this.power?(this.staffId=i.i(n.d)(),this.listQuery.userId=i.i(n.d)()):""==this.staffId||null==this.staffId?this.listQuery.userId=0:this.listQuery.userId=this.staffId,void 0!==this.value7&&""!==this.value7&&null!==this.value7&&null!==this.value7[0]?i.i(r.c)(this.listQuery).then(function(t){if(200===t.status){e.ishow=!0,e.chartDate=t.data;for(var i=t.data,a=[],s=[],r=0;r<i.length;r++)-1==a.indexOf(i[r].UserName)&&a.push(i[r].UserName);for(var n=0;n<i.length;n++)-1==s.indexOf(i[n].CodeName)&&s.push(i[n].CodeName);for(var l=[],o=0;o<s.length;o++){var u={};u.name=s[o],u.type="bar",u.data=[];for(var c=0;c<a.length;c++){for(var h=0,d=0;d<i.length;d++){if(i[d].UserName==a[c]&&i[d].CodeName==s[o]){u.data.push(i[d].SumMoney);break}h++}h==i.length&&u.data.push(0)}u.barWidth="20%",l.push(u)}e.legend=s,e.x=a,e.series=l,e.initChart()}else 201===t.status?(e.ishow=!1,e.chart.dispose()):e.$message({offset:700,message:t.tip,type:"error",duration:2e3})}):this.$message({offset:700,message:"请输入时间",type:"error",duration:2e3})},handleFilter:function(){this.search()},initChart:function(){this.chart=s.a.init(document.getElementById(this.id)),this.chart.setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:this.legend},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:this.x}],yAxis:[{type:"value"}],barMaxWidth:"60",barCateGoryGap:"10%",series:this.series,dataZoom:[{type:"slider",start:0,end:100}]},!0)}}}},"VRJ/":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{style:{height:e.height,width:e.width}},[e._v("\n    时间：\n    "),i("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd","picker-options":e.pickerOptions2},on:{change:e.textChange},model:{value:e.value7,callback:function(t){e.value7=t},expression:"value7"}}),e._v(" "),e._v("\n    查询模式：\n    "),i("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},on:{change:e.search},model:{value:e.listQuery.model,callback:function(t){e.$set(e.listQuery,"model",t)},expression:"listQuery['model']"}},e._l(e.options,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),i("el-input",{staticClass:"filter-item",staticStyle:{width:"300px"},attrs:{disabled:0==e.power,placeholder:"请输入员工工号",type:"number"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.search(t)}},model:{value:e.staffId,callback:function(t){e.staffId=e._n(t)},expression:"staffId"}}),e._v(" "),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),"1"==e.power?i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",disabled:0==e.ishow},on:{click:e.downLoad}},[e._v("下载")]):e._e(),e._v(" "),i("el-popover",{ref:"popover1",attrs:{placement:"bottom",trigger:"hover"}},[e._v("\n  有计件统计数据时，可以下载对应的EXCEL文件。"),i("br")]),e._v(" "),i("img",{directives:[{name:"popover",rawName:"v-popover:popover1",arg:"popover1"}],staticStyle:{opacity:"0.5",width:"17px"},attrs:{src:"static/img/icon_help.png",alt:"",srcset:""}}),e._v(" "),i("div",{class:e.className,style:{height:e.height,width:e.width},attrs:{id:e.id}})],1)},staticRenderFns:[]}},XkXY:function(e,t,i){var a=i("soQF");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i("rjj0")("6a9ffe61",a,!0)},cm1E:function(e,t,i){var a=i("VU/8")(i("MbcQ"),i("VRJ/"),null,null,null);e.exports=a.exports},"q/Nx":function(e,t,i){function a(e){i("XkXY")}var s=i("VU/8")(i("G+WT"),i("FrEr"),a,"data-v-7cf31e66",null);e.exports=s.exports},rEb0:function(e,t,i){"use strict";function a(e){return i.i(n.a)({url:"/bmapi/PieceworkStatistics",method:"get",params:e})}function s(e){return i.i(n.a)({url:"/bmapi/personal",method:"get",params:e})}function r(e){return i.i(n.a)({url:"/bmapi/downpice",method:"get",params:e})}t.c=a,t.a=s,t.b=r;var n=i("Vo7i")},soQF:function(e,t,i){t=e.exports=i("FZ+f")(!1),t.push([e.i,".chart-container[data-v-7cf31e66]{position:relative;width:100%;height:80%}",""])}});