webpackJsonp([52],{"3RDD":function(e,t,a){function n(e){a("O8EA")}var r=a("VU/8")(a("Hv5F"),a("izxC"),n,"data-v-dbc0fc66",null);e.exports=r.exports},C9uv:function(e,t,a){"use strict";function n(e){return a.i(c.a)({url:"/bmapi/bedinfo",method:"get",params:e})}function r(e){return a.i(c.a)({url:"/bmapi/downbedinfo",method:"get",params:e})}function o(e){return a.i(c.a)({url:"/bmapi/downbedinfos",method:"get",params:e})}t.c=n,t.a=r,t.b=o;var c=a("Vo7i")},Hv5F:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Xxa5"),r=a.n(n),o=a("exGp"),c=a.n(o),l=a("C9uv");t.default={data:function(){return{tableData:[],orderName:"",toatal:0,selectBedRow:[],loading:!1,key:Math.random()}},watch:{IsDownMore:function(){return 0==this.selectBedRow}},methods:{DownloadBed:function(e,t){var n=this;a.i(l.a)({type:e,bedId:t.BedId}).then(function(a){if(a.hasOwnProperty("Success")&&!a.Success)n.$message.warning(a.ErrMes);else{n.$refs.bedMes.clearSelection();var r=document.createElement("a");r.href="/bmapi/downbedinfo?bedId="+t.BedId+"&type="+e,r.click(),n.$refs.bedMes.clearSelection()}})},handleDownMore:function(){var e=this;return c()(r.a.mark(function t(){var n,o,c;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.selectBedRow.map(function(e){return e.BedId}).join(","),e.loading=!0,t.next=4,a.i(l.b)({bedIds:n});case 4:o=t.sent,e.loading=!1,o.hasOwnProperty("Success")&&!o.Success?e.$message.warning(o.ErrMes):(c=document.createElement("a"),c.href="/bmapi/downbedinfos?bedIds="+n,c.click(),e.$refs.bedMes.clearSelection());case 7:case"end":return t.stop()}},t,e)}))()},handleFormChange:function(e){this.selectBedRow=e},handleSearchBed:function(){var e=this;return c()(r.a.mark(function t(){var n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=e.orderName){t.next=3;break}return e.$message.warning("请输入订单名"),t.abrupt("return",!1);case 3:return t.next=5,a.i(l.c)({id:"",orderName:e.orderName});case 5:n=t.sent,200==n.status?(e.tableData=n.data.rows,e.total=n.data.total):e.$message.warning(n.tip);case 7:case"end":return t.stop()}},t,e)}))()}}}},O8EA:function(e,t,a){var n=a("W26D");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("d7ea2038",n,!0)},W26D:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".container[data-v-dbc0fc66]{padding:20px}",""])},izxC:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",slot:"header"},[a("el-input",{key:e.key,staticStyle:{width:"140px"},attrs:{name:"orderName",placeholder:"请输入订单名"},model:{value:e.orderName,callback:function(t){e.orderName=t},expression:"orderName"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSearchBed}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:0==e.selectBedRow.length,loading:e.loading},on:{click:e.handleDownMore}},[e._v("批量下载")])],1),e._v(" "),a("el-table",{ref:"bedMes",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleFormChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"BedName",align:"center",label:"床名",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.DownloadBed("nc",t.row)}}},[e._v("\n            "+e._s(t.row.BedName)+"\n          ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"OrderName",align:"center",label:"订单名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"MaterialCode",align:"center",label:"物料编码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"BedLen",align:"center",label:"长度"}}),e._v(" "),a("el-table-column",{attrs:{prop:"LayCount",align:"center",label:"层数"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"总长度"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.BedLen*t.row.LayCount)+"\n      ")]}}])})],1)],1)],1)},staticRenderFns:[]}}});