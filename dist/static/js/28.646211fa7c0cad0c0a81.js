webpackJsonp([28],{"5eeu":function(e,t,a){var r=a("oZAN");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("09355694",r,!0)},DpDd:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("XLwt"),n=a.n(r),l=a("vROF");t.default={props:{className:{type:String,default:"chart"},id:{type:String,default:"chart"}},data:function(){return{tableData:null,chart:null,currenWeek:null,legend:["样板数","生产单数","件数","床数","铺布总长度","特体Pod数"],year1:"2018",xAxis:["第2周","第4周","第6周","第8周","第10周","第12周","第14周","第16周","第18周","第20周","第22周","第24周","第26周","第28周","第30周","第32周","第34周","第36周","第38周","第40周","第42周","第44周","第46周","第48周","第50周","第52周"],yAxis:[],listQuery:{year:"2018",PLID:this.$store.state.user.PLID,random:Math.random()},series:[],option:{}}},created:function(){this.currenWeek=Math.ceil(this.getWeekOfYear()/2),this.xAxis.splice(this.currenWeek)},mounted:function(){var e=this;a.i(l.a)(this.listQuery).then(function(t){if(200===t.status)if("sql server"==t.data.type){e.legend=t.data.legend;for(var a=t.data.series,r=0;r<a.length;r++){for(var n=a[r].CompanyName,l=[],o=a[r].Data.length-e.currenWeek;o<a[r].Data.length;o++)l.push(a[r].Data[o]);var s=l,i={};i.type="line",i.name=n,i.data=s,e.series.push(i)}e.initChart()}else{e.legend=t.data.legend;for(var a=t.data.series,u=0;u<a.length;u++){for(var c=a[u].CompanyName,l=[],d=a[u].Data.length-e.currenWeek;d<a[u].Data.length;d++)l.push(a[u].Data[d]);var p=l,i={};i.type="line",i.name=c,i.data=p,e.series.push(i)}e.initChart()}else e.$message({offset:700,message:t.error,type:"warning",duration:2e3})}),a.i(l.b)(this.listQuery).then(function(t){e.tableData=t.data.rows,e.tableData[0].Msg1="总数",e.tableData[0].Msg2="平均"})},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{getWeekOfYear:function(){var e=new Date,t=new Date(e.getFullYear(),0,1),a=t.getDay(),r=1;0!=a&&(r=7-a+1),t=new Date(e.getFullYear(),0,1+r);var n=Math.ceil((e.valueOf()-t.valueOf())/864e5);return Math.ceil(n/7)+1},initChart:function(){this.chart=n.a.init(document.getElementById(this.id)),this.chart.setOption({tooltip:{trigger:"axis"},legend:{data:this.legend},optionToContent:function(e){var t=e.xAxis[0].data,a=e.series,r='<td  style="padding: 0 10px">时间</td>',n="",l=0;a.forEach(function(e){r+='<td style="padding: 0 10px">'+e.name+"</td>"});for(var o='<table border="1" style="margin-left:20px;border-collapse:collapse;font-size:14px;text-align:center"><tbody><tr>'+r+" </tr>",s=0,i=t.length;s<i;s++){for(var u=0;u<a.length;u++)n+="<td>"+a[u].data[s]+"</td>",l+=a[u].data[s];o+='<tr><td style="padding: 0 10px">'+t[s]+"</td>"+n+"</tr>",n=""}return o+="</tbody></table>"},calculable:!0,xAxis:[{type:"category",boundaryGap:!1,data:this.xAxis}],yAxis:[{type:"value"}],dataZoom:[{type:"slider",start:0,end:100}],series:this.series})}}}},HZ12:function(e,t,a){var r=a("K7K5");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("5e1d9019",r,!0)},K7K5:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".chart-container[data-v-755abef0]{position:relative;width:100%;height:90%;padding-bottom:40px}",""])},OUQf:function(e,t,a){function r(e){a("HZ12")}var n=a("VU/8")(a("wDLk"),a("wszQ"),r,"data-v-755abef0",null);e.exports=n.exports},XbcH:function(e,t,a){function r(e){a("5eeu")}var n=a("VU/8")(a("DpDd"),a("cfEL"),r,null,null);e.exports=n.exports},cfEL:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{style:{height:"100%"}},[a("el-table",{attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"Msg1",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"SumModel",label:"样板数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"SumOrder",label:"生产单数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"SumNumber",label:"件数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"SumBed",label:"床数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"SumLen",label:"铺布总长度",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"SumPod",label:"特体Pod数",align:"center"}})],1),e._v(" "),a("el-table",{attrs:{data:e.tableData,"show-header":!1,border:""}},[a("el-table-column",{attrs:{prop:"Msg2",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"AvgModel",label:"AvgModel",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(null!=t.row.AvgModel?parseFloat(t.row.AvgModel).toFixed(2):"")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"AvgOrder",label:"AvgOrder",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(null!=t.row.AvgOrder?parseFloat(t.row.AvgOrder).toFixed(2):"")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"AvgNumber",label:"AvgNumber",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(null!=t.row.AvgNumber?parseFloat(t.row.AvgNumber).toFixed(2):"")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"AvgBed",label:"AvgBed",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(null!=t.row.AvgBed?parseFloat(t.row.AvgBed).toFixed(2):"")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"AvgLen",label:"AvgLen",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(null!=t.row.AvgLen?parseFloat(t.row.AvgLen).toFixed(2):"")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"AvgPod",label:"AvgPod",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(null!=t.row.AvgPod?parseFloat(t.row.AvgPod).toFixed(2):"")+"\n      ")]}}])})],1),e._v(" "),a("div",{class:e.className,style:{height:"80%",width:"80%"},attrs:{id:e.id}})],1)},staticRenderFns:[]}},oZAN:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""])},vROF:function(e,t,a){"use strict";function r(e){return a.i(l.a)({url:"/bmapi/CurrentYearStatistics",method:"get",params:e})}function n(e){return a.i(l.a)({url:"/bmapi/CurrentYearTable",method:"get",params:e})}t.a=r,t.b=n;var l=a("Vo7i")},wDLk:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("XbcH"),n=a.n(r);t.default={components:{currentYearchart:n.a}}},wszQ:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"components-container",staticStyle:{height:"100vh"}},[a("div",{staticClass:"chart-container"},[a("currentYearchart",{attrs:{height:"100%",width:"100%"}})],1)])},staticRenderFns:[]}}});