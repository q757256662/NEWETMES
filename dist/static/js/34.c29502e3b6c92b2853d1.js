webpackJsonp([34],{"0p+7":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container"},[a("canvas",{ref:"draw",attrs:{id:"drawing",width:e.autoWidth,height:e.autoHeight}},[e._v("A drawing of something.")])])},staticRenderFns:[]}},"5Dyr":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Gu7T"),o=a.n(n),i=a("WYoQ"),l=a.n(i),s=a("cBpk");t.default={components:{CanvasPart:l.a},data:function(){return{jsonpart:[],teamplteJson:{},selectPart:"",partoptions:[],scaleSIze:50}},methods:{initData:function(){var e=this;this.teamplteJson.piece.map(function(t,a){e.partoptions.push({value:a,label:t.name+"-"+t.size})}),this.selectPart=0},handleDownloadImg:function(){this.$refs.CanvasPart.handleClick()},formatTooltip:function(e){return e/5},onQueryJson:function(e){var t=this;a.i(s.a)({id:e.id,type:e.type}).then(function(e){e.errcode?t.$message.warning(e.errmsg):t.teamplteJson=e})}},watch:{selectPart:function(e){this.jsonpart=[].concat(o()(this.teamplteJson.piece)).splice(e,1)},scaleSIze:function(){this.jsonpart=[].concat(o()(this.teamplteJson.piece)).splice(this.selectPart,1)},teamplteJson:function(){this.initData()}},created:function(e){this.query=this.$route.query;var t=this.query;t.id&&t.type&&this.onQueryJson({id:t.id,type:t.type})}}},"6tAL":function(e,t,a){function n(e){a("8UZg")}var o=a("VU/8")(a("5Dyr"),a("IpyA"),n,"data-v-5c620c9e",null);e.exports=o.exports},"8UZg":function(e,t,a){var n=a("hqT0");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("46ec3966",n,!0)},IpyA:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",slot:"header"},[a("h2",{staticStyle:{"text-align":"center"}},[e._v("充绒数据")]),e._v(" "),a("span",{staticStyle:{"line-height":"36px"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.selectPart,callback:function(t){e.selectPart=t},expression:"selectPart"}},[a("el-option-group",{attrs:{label:"部件名称"}},e._l(e.partoptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("span",{staticStyle:{"line-height":"36px"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.scaleSIze,callback:function(t){e.scaleSIze=t},expression:"scaleSIze"}},[a("el-option-group",{attrs:{label:"缩放比例"}},[a("el-option",{key:"5",attrs:{label:"50%",value:25}}),e._v(" "),a("el-option",{key:"3.75",attrs:{label:"75%",value:37.5}}),e._v(" "),a("el-option",{key:"5",attrs:{label:"100%",value:50}}),e._v(" "),a("el-option",{key:"6.25",attrs:{label:"125%",value:62.5}}),e._v(" "),a("el-option",{key:"7.5",attrs:{label:"150%",value:75}}),e._v(" "),a("el-option",{key:"10",attrs:{label:"200%",value:100}})],1)],1)],1),e._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.handleDownloadImg}},[e._v("下载")])],1),e._v(" "),a("CanvasPart",{ref:"CanvasPart",attrs:{json:e.jsonpart,scaleSIze:e.scaleSIze/10}})],1)],1)},staticRenderFns:[]}},WYoQ:function(e,t,a){var n=a("VU/8")(a("p5Jy"),a("0p+7"),null,null,null);e.exports=n.exports},cBpk:function(e,t,a){"use strict";function n(e){return a.i(m.a)({url:"/bmapi/personal",method:"get",params:e})}function o(e){return a.i(m.a)({url:"/test/comments?obj",method:"post",data:e})}function i(e){return a.i(m.a)({url:"/test/comments/"+e,method:"get"})}function l(e){return a.i(m.a)({url:"/test/comments/"+e,method:"delete"})}function s(e){return a.i(m.a)({url:"/bmapi/personal?obj",method:"put",data:e})}function r(e){return a.i(m.a)({url:"/bmapi/export/nc",method:"get",params:e})}function c(e){return a.i(m.a)({url:"/bmapi/export/plt",method:"get",params:e})}function p(e){return a.i(m.a)({url:"/bmapi/export/cr",method:"get",params:e,responseType:"blob"})}function u(e){return a.i(m.a)({url:"/bmapi/export/excel",method:"get",params:e,responseType:"blob",headers:{"Content-Type":"application/json; application/octet-stream"}})}t.e=n,t.i=o,t.g=i,t.h=l,t.f=s,t.b=r,t.c=c,t.a=p,t.d=u;var m=a("Vo7i")},hqT0:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".container[data-v-5c620c9e]{padding:20px}",""])},p5Jy:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"CanvasPart",props:{json:{type:Array,default:[]},scaleSIze:{type:Number,default:1}},data:function(){return{min:0,minX:0,maxX:0,minY:0,maxY:0,moveX:0,moveY:0,autoWidth:1e3,autoHeight:800}},methods:{reDraw:function(e){var t=this,a=document.getElementById("drawing"),n=a.getContext("2d");e.map(function(e){e.area.map(function(e){for(var a=0;a<e.polygon.length;a++)0==a&&(t.minX=0==t.minX?e.polygon[a]*t.scaleSIze:t.minX,t.maxX=0==t.maxX?e.polygon[a]*t.scaleSIze:t.maxX),1==a&&(t.maxY=0==t.maxY?e.polygon[a]*t.scaleSIze:t.maxY,t.minY=0==t.minY?e.polygon[a]*t.scaleSIze:t.minY),a%2==0?(t.minX>e.polygon[a]*t.scaleSIze&&(t.minX=e.polygon[a]*t.scaleSIze),t.maxX<e.polygon[a]*t.scaleSIze&&(t.maxX=e.polygon[a]*t.scaleSIze)):(t.minY>e.polygon[a]*t.scaleSIze&&(t.minY=e.polygon[a]*t.scaleSIze),t.maxY<e.polygon[a]*t.scaleSIze&&(t.maxY=e.polygon[a]*t.scaleSIze));t.autoWidth=t.maxX-t.minX+40,t.autoHeight=t.maxY-t.minY+40,t.moveX=t.autoWidth/2-(t.minX+t.maxX)/2,t.moveY=t.autoHeight/2-(t.minY+t.maxY)/2})}),setTimeout(function(){n.fillStyle="white",n.fillRect(0,0,t.autoWidth,t.autoHeight),e.map(function(e){e.area.map(function(e){n.fillStyle="#000",n.beginPath(),n.font="15px Arial",n.lineWidth=2,n.fillText(e.weight,e.x*t.scaleSIze+t.moveX,e.y*t.scaleSIze+t.moveY),n.moveTo(e.polygon[0]*t.scaleSIze+t.moveX,e.polygon[1]*t.scaleSIze+t.moveY);for(var a=2;a<e.polygon.length;a+=2)n.lineTo(e.polygon[a]*t.scaleSIze+t.moveX,e.polygon[a+1]*t.scaleSIze+t.moveY);n.stroke(),n.closePath()}),t.min=0})},0)},handleClick:function(){if(this.json.length){var e=document.getElementById("drawing").toDataURL("image/png"),t=document.createElement("a");document.body.appendChild(t),t.href=e,t.download=this.json[0].name+"-"+this.json[0].size+".jpg",t.click()}else this.$message.warning("暂无部件信息")},resetForm:function(){this.minX=0,this.maxX=0,this.minY=0,this.maxY=0,this.moveX=0,this.move=0}},mounted:function(){},watch:{json:function(e){this.resetForm(),this.reDraw(e)}}}}});